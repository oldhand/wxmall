<?php
    $expressname = array (
        '申通'        => 'shentong',
        '安信达'       => 'anxindakuaixi',
        '百世汇通'      => 'huitongkuaidi',
        '百福东方'      => 'baifudongfang',
        '包裹/平邮/挂号信' => 'youzhengguonei',
        '邦送物流'      => 'bangsongwuliu',
        '希伊艾斯'      => 'cces',
        '中国东方'      => 'coe',
        '传喜物流'      => 'chuanxiwuliu',
        '大田物流'      => 'datianwuliu',
        '德邦物流'      => 'debangwuliu',
        '德邦'        => 'debangwuliu',
        'DPEX'      => 'dpex',
        'DHL'       => 'dhl',
        'D速快递'      => 'dsukuaidi',
        '递四方'       => 'disifang',
        'EMS'       => 'ems',
        'E邮宝'       => 'ems',
        'Fedex'     => 'edex',
        '飞康达物流'     => 'feikangda',
        '飞快达'       => 'feikuaida',
        '凡客如风达'     => 'rufengda',
        '风行天下'      => 'fengxingtianxia',
        '飞豹快递'      => 'feibaokuaidi',
        '港中能达'      => 'ganzhongnengda',
        '国通快递'      => 'guotongkuaidi',
        '广东邮政'      => 'guangdongyouzhengwuliu',
        '挂号信'       => 'youzhengguonei',
        '国内邮件'      => 'youzhengguonei',
        '国际邮件'      => 'youzhengguoji',
        'GLS'       => 'gls',
        '共速达'       => 'gongsuda',
        '汇通快运'      => 'huitongkuaidi',
        '汇通'        => 'huitongkuaidi',
        '汇强快递'      => 'huiqiangkuaidi',
        '华宇物流'      => 'tiandihuayu',
        '恒路物流'      => 'hengluwuliu',
        '华夏龙'       => 'huaxialongwuliu',
        '海航天天'      => 'tiantian',
        '海外环球'      => 'haiwaihuanqiu',
        '河北建华'      => 'hebeijianhua',
        '海盟速递'      => 'haimengsudi',
        '华企快运'      => 'huaqikuaiyun',
        '山东海红'      => 'haihongwangsong',
        '佳吉物流'      => 'jiajiwuliu',
        '佳怡物流'      => 'jiayiwuliu',
        '加运美'       => 'jiayunmeiwuliu',
        '京广速递'      => 'jinguangsudikuaijian',
        '急先达'       => 'jixianda',
        '晋越快递'      => 'jinyuekuaidi',
        '捷特快递'      => 'jietekuaidi',
        '金大物流'      => 'jindawuliu',
        '嘉里大通'      => 'jialidatong',
        '快捷速递'      => 'kuaijiesudi',
        '康力物流'      => 'kangliwuliu',
        '跨越物流'      => 'kuayue',
        '联昊通'       => 'lianhaowuliu',
        '龙邦物流'      => 'longbanwuliu',
        '龙邦速递'      => 'longbanwuliu',
        '蓝镖快递'      => 'lanbiaokuaidi',
        '乐捷递'       => 'lejiedi',
        '联邦快递'      => 'lianbangkuaidien',
        '立即送'       => 'lijisong',
        '隆浪快递'      => 'longlangkuaidi',
        '门对门'       => 'menduimen',
        '美国快递'      => 'meiguokuaidi',
        '明亮物流'      => 'mingliangwuliu',
        'OCS'       => 'ocs',
        'onTrac'    => 'ontrac',
        '全晨快递'      => 'quanchenkuaidi',
        '全际通'       => 'quanjitong',
        '全日通'       => 'quanritongkuaidi',
        '全一快递'      => 'quanyikuaidi',
        '全峰快递'      => 'quanfengkuaidi',
        '全峰'        => 'quanfengkuaidi',
        '七天连锁'      => 'sevendays',
        '如风达快递'     => 'rufengda',
        '如风达'       => 'rufengda',
        '伸通'        => 'shentong',
        '顺丰速递'      => 'shunfeng',
        '顺丰'        => 'shunfeng',
        '三态速递'      => 'santaisudi',
        '盛辉物流'      => 'shenghuiwuliu',
        '速尔物流'      => 'suer',
        '盛丰物流'      => 'shengfengwuliu',
        '上大物流'      => 'shangda',
        '赛澳递'       => 'saiaodi',
        '山西红马甲'     => 'sxhongmajia',
        '圣安物流'      => 'shenganwuliu',
        '穗佳物流'      => 'suijiawuliu',
        '天地华宇'      => 'tiandihuayu',
        '天天快递'      => 'tiantian',
        '天天'        => 'tiantian',
        'TNT'       => 'tnt',
        '通和天下'      => 'tonghetianxia',
        'UPS'       => 'ups',
        '优速物流'      => 'youshuwuliu',
        '优速快递'      => 'youshuwuliu',
        '优速'        => 'youshuwuliu',
        '万家物流'      => 'wanjiawuliu',
        '万象物流'      => 'wanxiangwuliu',
        '微特派'       => 'weitepai',
        '新邦物流'      => 'xinbangwuliu',
        '信丰物流'      => 'xinfengwuliu',
        '星晨急便'      => 'xingchengjibian',
        '鑫飞鸿'       => 'xinhongyukuaidi',
        '新蛋奥硕物流'    => 'neweggozzo',
        '香港邮政'      => 'hkpost',
        '圆通速递'      => 'yuantong',
        '圆通'        => 'yuantong',
        '韵达快运'      => 'yunda',
        '韵达'        => 'yunda',
        '运通快递'      => 'yuntongkuaidi',
        '邮政小包'      => 'youzhengguonei',
        '邮政包裹'      => 'youzhengguonei',
        '国际邮政小包'    => 'youzhengguoji',
        '国际邮政包裹'    => 'youzhengguoji',
        '远成物流'      => 'yuanchengwuliu',
        '亚风速递'      => 'yafengsudi',
        '一邦速递'      => 'yibangwuliu',
        '源伟丰快递'     => 'yuanweifeng',
        '元智捷诚'      => 'yuanzhijiecheng',
        '越丰物流'      => 'yuefengwuliu',
        '源安达'       => 'yuananda',
        '原飞航'       => 'yuanfeihangwuliu',
        '忠信达快递'     => 'zhongxinda',
        '芝麻开门'      => 'zhimakaimen',
        '银捷速递'      => 'yinjiesudi',
        '一统飞鸿'      => 'yitongfeihong',
        '中通速递'      => 'zhongtong',
        '中通'        => 'zhongtong',
        '宅急送'       => 'zhaijisong',
        '中邮物流'      => 'zhongyouwuliu',
        '忠信达'       => 'zhongxinda',
        '中速快件'      => 'zhongsukuaidi',
        '郑州建华'      => 'zhengzhoujianhua',
        '中天万运'      => 'zhongtianwanyun',
    );
    $cookie_jar  = tempnam('./tmp', 'WULIUSSIONID');
    $ch          = curl_init();
    curl_setopt($ch, CURLOPT_URL, "http://m.kuaidi100.com/index_all.html?type=".$_REQUEST["type"]."&postid=".$_REQUEST["postid"]."#result");
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    //设置文件读取并提交的cookie路径
    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_jar);
    $filecontent = curl_exec($ch);
    curl_close($ch);
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, "http://m.kuaidi100.com/query?type=".$expressname[$_REQUEST["type"]]."&postid=".$_REQUEST["postid"]."&id=1&valicode=&temp=0.1491105619352311");
    curl_setopt($ch, CURLOPT_REFERER, "http://m.kuaidi100.com/index_all.html?type=".$_REQUEST["type"]."&postid=".$_REQUEST["postid"]."#result");
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (iPhone; CPU iPhone OS 7_0 like Mac OS X; en-us) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/7.0 Mobile/11A465 Safari/9537.53");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_jar);
    curl_setopt($ch, CURLOPT_HEADER, false);//设定是否输出页面内容
    curl_setopt($ch, CURLOPT_GET, 1); // post,get 过去
    $filecontent = curl_exec($ch);
    curl_close($ch);
    echo $filecontent;